<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>merkle-db.tablet documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Merkle-db</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>merkle-db</span></div></div></li><li class="depth-2 branch"><a href="merkle-db.bloom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bloom</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.connection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connection</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.key.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>key</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.node.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>node</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.partition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>partition</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-2 current"><a href="merkle-db.tablet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tablet</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="merkle-db.tablet.html#var-fields-present"><div class="inner"><span>fields-present</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-first-key"><div class="inner"><span>first-key</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-from-records"><div class="inner"><span>from-records</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-from-records*"><div class="inner"><span>from-records*</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-join"><div class="inner"><span>join</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-keys"><div class="inner"><span>keys</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-last-key"><div class="inner"><span>last-key</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-merge-fields"><div class="inner"><span>merge-fields</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-nth-key"><div class="inner"><span>nth-key</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-prune-records"><div class="inner"><span>prune-records</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-read-all"><div class="inner"><span>read-all</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-read-batch"><div class="inner"><span>read-batch</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-read-range"><div class="inner"><span>read-range</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-remove-batch"><div class="inner"><span>remove-batch</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-remove-range"><div class="inner"><span>remove-range</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-split"><div class="inner"><span>split</span></div></a></li><li class="depth-1"><a href="merkle-db.tablet.html#var-update-records"><div class="inner"><span>update-records</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">merkle-db.tablet</h1><div class="doc"><div class="markdown"><p>Functions for working with tablet data.</p></div></div><div class="public anchor" id="var-fields-present"><h3>fields-present</h3><div class="usage"><code>(fields-present tablet)</code></div><div class="doc"><div class="markdown"><p>Scans the records in a tablet to determine the full set of fields present.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L61">view source</a></div></div><div class="public anchor" id="var-first-key"><h3>first-key</h3><div class="usage"><code>(first-key tablet)</code></div><div class="doc"><div class="markdown"><p>Return the first record key present in the tablet.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L33">view source</a></div></div><div class="public anchor" id="var-from-records"><h3>from-records</h3><div class="usage"><code>(from-records records)</code><code>(from-records f records)</code></div><div class="doc"><div class="markdown"><p>Construct a tablet from a collection of record keys and field data.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L149">view source</a></div></div><div class="public anchor" id="var-from-records*"><h3>from-records*</h3><div class="usage"><code>(from-records* records)</code></div><div class="doc"><div class="markdown"><p>Constructs a new bare-bones tablet node.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L54">view source</a></div></div><div class="public anchor" id="var-join"><h3>join</h3><div class="usage"><code>(join left right)</code></div><div class="doc"><div class="markdown"><p>Join two tablets into a single tablet. The tablets key ranges must not overlap.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L91">view source</a></div></div><div class="public anchor" id="var-keys"><h3>keys</h3><div class="usage"><code>(keys tablet)</code></div><div class="doc"><div class="markdown"><p>Return a sequence of the keys in the tablet.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L27">view source</a></div></div><div class="public anchor" id="var-last-key"><h3>last-key</h3><div class="usage"><code>(last-key tablet)</code></div><div class="doc"><div class="markdown"><p>Return the last record key present in the tablet.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L39">view source</a></div></div><div class="public anchor" id="var-merge-fields"><h3>merge-fields</h3><div class="usage"><code>(merge-fields _ left right)</code></div><div class="doc"><div class="markdown"><p>Merge updated fields from the <code>right</code> map into the <code>left</code> map, dropping any fields which are nil-valued.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L139">view source</a></div></div><div class="public anchor" id="var-nth-key"><h3>nth-key</h3><div class="usage"><code>(nth-key tablet n)</code></div><div class="doc"><div class="markdown"><p>Return the nth key present in the tablet data.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L45">view source</a></div></div><div class="public anchor" id="var-prune-records"><h3>prune-records</h3><div class="usage"><code>(prune-records tablet)</code></div><div class="doc"><div class="markdown"><p>Update a tablet by removing empty records from the data.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L187">view source</a></div></div><div class="public anchor" id="var-read-all"><h3>read-all</h3><div class="usage"><code>(read-all tablet)</code></div><div class="doc"><div class="markdown"><p>Read a sequence of key/map tuples which contain the field data for all the records in the tablet.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L108">view source</a></div></div><div class="public anchor" id="var-read-batch"><h3>read-batch</h3><div class="usage"><code>(read-batch tablet record-keys)</code></div><div class="doc"><div class="markdown"><p>Read a lazy sequence of key/map tuples which contain the field data for the records whose keys are in the given collection.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L115">view source</a></div></div><div class="public anchor" id="var-read-range"><h3>read-range</h3><div class="usage"><code>(read-range tablet start-key end-key)</code></div><div class="doc"><div class="markdown"><p>Read a lazy sequence of key/map tuples which contain the field data for the records whose keys lie in the given range, inclusive. A nil boundary includes all records in that range direction.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L123">view source</a></div></div><div class="public anchor" id="var-remove-batch"><h3>remove-batch</h3><div class="usage"><code>(remove-batch tablet record-keys)</code></div><div class="doc"><div class="markdown"><p>Update the tablet by removing certain record keys from it. Returns nil if the resulting tablet is empty.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L193">view source</a></div></div><div class="public anchor" id="var-remove-range"><h3>remove-range</h3><div class="usage"><code>(remove-range tablet start-key end-key)</code></div><div class="doc"><div class="markdown"><p>Update the tablet by removing a range of record keys from it. Returns nil if the resulting tablet is empty.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L208">view source</a></div></div><div class="public anchor" id="var-split"><h3>split</h3><div class="usage"><code>(split tablet split-key)</code></div><div class="doc"><div class="markdown"><p>Split the tablet into two tablets at the given key. All records less than the split key will be contained in the first tablet, all others in the second. </p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L67">view source</a></div></div><div class="public anchor" id="var-update-records"><h3>update-records</h3><div class="usage"><code>(update-records tablet f records)</code></div><div class="doc"><div class="markdown"><p>Update a tablet by merging record data into it.</p>
<p>For each record in the <code>records</code> map, the function <code>f</code> will be called with the record key, the old data (or nil, if the key is absent), and the new data. The result will be used as the new data for that record. Nil results are promoted to empty record maps.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/tablet.clj#L161">view source</a></div></div></div></body></html>