<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>merkle-db.patch documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Merkle-db</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="api.html"><div class="inner"><span>Client API</span></div></a></li><li class="depth-1 "><a href="design.html"><div class="inner"><span>Structural Design</span></div></a></li><li class="depth-1 "><a href="usage.html"><div class="inner"><span>Usage Patterns</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>merkle-db</span></div></div></li><li class="depth-2 branch"><a href="merkle-db.bloom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bloom</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.connection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connection</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.key.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>key</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.partition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>partition</span></div></a></li><li class="depth-2 branch current"><a href="merkle-db.patch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>patch</span></div></a></li><li class="depth-2 branch"><a href="merkle-db.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-2"><a href="merkle-db.tablet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tablet</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="merkle-db.patch.html#var-data-type"><div class="inner"><span>data-type</span></div></a></li><li class="depth-1"><a href="merkle-db.patch.html#var-filter-patch"><div class="inner"><span>filter-patch</span></div></a></li><li class="depth-1"><a href="merkle-db.patch.html#var-from-changes"><div class="inner"><span>from-changes</span></div></a></li><li class="depth-1"><a href="merkle-db.patch.html#var-patch-seq"><div class="inner"><span>patch-seq</span></div></a></li><li class="depth-1"><a href="merkle-db.patch.html#var-remove-tombstones"><div class="inner"><span>remove-tombstones</span></div></a></li><li class="depth-1"><a href="merkle-db.patch.html#var-tombstone"><div class="inner"><span>tombstone</span></div></a></li><li class="depth-1"><a href="merkle-db.patch.html#var-tombstone.3F"><div class="inner"><span>tombstone?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">merkle-db.patch</h1><div class="doc"><div class="markdown"><p>Patches are applied on top of tables in order to efficiently store changes while re-using old indexed data.</p></div></div><div class="public anchor" id="var-data-type"><h3>data-type</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Value of <code>:data/type</code> that indicates a patch tablet node.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L27">view source</a></div></div><div class="public anchor" id="var-filter-patch"><h3>filter-patch</h3><div class="usage"><code>(filter-patch patch opts)</code></div><div class="doc"><div class="markdown"><p>Takes a full set of patch data and returns a filtered sequence based on the given options.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L68">view source</a></div></div><div class="public anchor" id="var-from-changes"><h3>from-changes</h3><div class="usage"><code>(from-changes changes)</code></div><div class="doc"><div class="markdown"><p>Construct a patch tablet node data from a map of change data.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L52">view source</a></div></div><div class="public anchor" id="var-patch-seq"><h3>patch-seq</h3><div class="usage"><code>(patch-seq patch records)</code></div><div class="doc"><div class="markdown"><p>Combines an ordered sequence of patch data with a lazy sequence of record keys and data. Any records present in the patch will appear in the output sequence, replacing any equivalent keys from the sequence. The result may contain tombstones.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L83">view source</a></div></div><div class="public anchor" id="var-remove-tombstones"><h3>remove-tombstones</h3><div class="usage"><code>(remove-tombstones rs)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy sequence of record entries with tombstoned records removed.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L62">view source</a></div></div><div class="public anchor" id="var-tombstone"><h3>tombstone</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Value which marks the deletion of a record.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L13">view source</a></div></div><div class="public anchor" id="var-tombstone.3F"><h3>tombstone?</h3><div class="usage"><code>(tombstone? x)</code></div><div class="doc"><div class="markdown"><p>Returns true if the value is a tombstone.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkle-db/blob/master/src/merkle_db/patch.clj#L18">view source</a></div></div></div></body></html>